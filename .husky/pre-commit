#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

echo 'ğŸ—ï¸ğŸ‘· Styling, testing and building your project before committing'

# Edit the command sequence in package.json
npx lint-staged

echo 'ğŸ‘·ğŸ» Building project...'

# Build project
npm run build || (
        echo 'ğŸš¨ ğŸ‘·ğŸ» Build try failed
        
        Build process failed, please check the above errors.

        ğŸ’¡ You can also run `npm run build` to see the issues and fix them manually.
        '
        false;
)

echo 'âœ… ğŸ‘·ğŸ» Project built successfully. Removing build artifacts...'

# Remove build artifacts
npm run build:clean || (
        echo 'ğŸš¨ ğŸ‘·ğŸ» Build clean failed
        
        Build clean process failed, please check the above errors.

        ğŸ’¡ You can also run `npm run build:clean` to see the issues and fix them manually.
        '
        false;
)

echo 'âœ… All validation checks passed. Commiting... ğŸ¤˜ğŸ»'
